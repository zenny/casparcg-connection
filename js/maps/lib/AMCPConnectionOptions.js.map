{"version":3,"sources":["lib/AMCPConnectionOptions.ts"],"names":[],"mappings":";AAQA;;GAEG;AACH,IAAiB,OAAO,CAUvB;AAVD,WAAiB,OAAO,EAAC,CAAC;IAEzB;;OAEG;IACH,WAAY,SAAS;QACpB,2CAAW,CAAA;QACX,qDAAe,CAAA;QACf,2CAAW,CAAA;IACZ,CAAC,EAJW,iBAAS,KAAT,iBAAS,QAIpB;IAJD,IAAY,SAAS,GAAT,iBAIX,CAAA;AACF,CAAC,EAVgB,OAAO,GAAP,eAAO,KAAP,eAAO,QAUvB;AAsBD;;GAEG;AACH;IAqBC,2BAAY,aAA0C,EAAE,IAAa;QApB9D,SAAI,GAAW,WAAW,CAAC;QAC3B,SAAI,GAAW,IAAI,CAAC;QACpB,gBAAW,GAAY,IAAI,CAAC;QAC5B,kBAAa,GAAY,IAAI,CAAC;QAC9B,0BAAqB,GAAW,IAAI,CAAC;QACrC,0BAAqB,GAAW,QAAQ,CAAC;QACzC,cAAS,GAAsB,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,oGAAoG;QACjK,UAAK,GAAY,KAAK,CAAC;QACvB,UAAK,GAAoB,SAAS,CAAC;QACnC,uBAAkB,GAA0B,SAAS,CAAC;QAEtD,gBAAW,GAAqB,SAAS,CAAC;QAC1C,mBAAc,GAAqB,SAAS,CAAC;QAC7C,YAAO,GAAmB,SAAS,CAAC;QAS1C,YAAY;QACZ,EAAE,CAAC,CAAC,aAAa,IAAI,OAAO,aAAa,KAAK,QAAQ,CAAC,CAAC,CAAC;YACxD,EAAE,CAAC,CAAC,aAAa,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC1C,IAAI,aAAa,GAAkB,gJAAgJ,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChN,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;oBACnB,OAAO,aAAa,CAAC,MAAM,CAAC,CAAC;oBAC7B,OAAO;oBACP,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxB,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;oBAC9B,CAAC;oBACD,OAAO;oBACP,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC5C,CAAC;gBACF,CAAC;YACF,CAAC;YAED,uBAAuB;YACvB,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,aAAa,CAAC,CAAC,CAAC;gBAC/B,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBACxC,QAAQ,CAAC;gBACV,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9B,IAAI,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;gBAChC,CAAC;YACF,CAAC;YACD,MAAM,CAAC;QACR,CAAC;QAED,OAAO;QACP,EAAE,CAAC,CAAC,OAAO,aAAa,KAAK,QAAQ,CAAC,CAAC,CAAC;YACvC,IAAI,aAAa,GAAkB,gJAAgJ,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,CAAC;YACnN,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;gBACnB,OAAO;gBACP,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;gBAC9B,CAAC;gBACD,OAAO;gBACP,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;gBAC5C,CAAC;YACF,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACV,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YAClB,CAAC;QACF,CAAC;IACF,CAAC;IACF,wBAAC;AAAD,CAtEA,AAsEC,IAAA;AAtEY,yBAAiB,oBAsE7B,CAAA","file":"lib/AMCPConnectionOptions.js","sourcesContent":["// Callback NS\nimport {Callback as CallbackNS} from \"./global/Callback\";\nimport IBooleanCallback = CallbackNS.IBooleanCallback;\nimport IErrorCallback = CallbackNS.IErrorCallback;\nimport IEventCallback = CallbackNS.IEventCallback;\nimport IStringCallback = CallbackNS.IStringCallback;\nimport ISocketStatusCallback = CallbackNS.ISocketStatusCallback;\n\n/**\n * \n */\nexport namespace Options {\n\n\t/**\n\t * \n\t */\n\texport enum QueueMode  {\n\t\tSALVO \t\t= 1,\n\t\tSEQUENTIAL \t= 2,\n\t\tSMART \t\t= 3\n\t}\n}\n\n/**\n * \n */\nexport interface IConnectionOptions {\n\thost?: string;\n\tport?: number;\n\tautoConnect?: boolean;\n\tautoReconnect?: boolean;\n\tautoReconnectInterval?: number;\n\tautoReconnectAttempts?: number;\n\tqueueMode?: Options.QueueMode;\n\tdebug?: boolean;\n\tonLog?: IStringCallback;\n\tonConnectionStatus?: ISocketStatusCallback;\n\tonConnectionChanged?: IBooleanCallback;\n\tonConnected?: IBooleanCallback;\n\tonDisconnected?: IBooleanCallback;\n\tonError?: IErrorCallback;\n}\n\n/**\n * \n */\nexport class ConnectionOptions implements IConnectionOptions {\n\tpublic host: string = \"localhost\";\n\tpublic port: number = 5250;\n\tpublic autoConnect: boolean = true;\n\tpublic autoReconnect: boolean = true;\n\tpublic autoReconnectInterval: number = 1000;\n\tpublic autoReconnectAttempts: number = Infinity;\n\tpublic queueMode: Options.QueueMode = Options.QueueMode.SEQUENTIAL;\t// @todo: change to SALVO once server has command UIDs https://github.com/CasparCG/Server/issues/475\n\tpublic debug: boolean = false;\n\tpublic onLog: IStringCallback = undefined;\n\tpublic onConnectionStatus: ISocketStatusCallback = undefined;\n\tpublic onConnectionChanged: IBooleanCallback;\n\tpublic onConnected: IBooleanCallback = undefined;\n\tpublic onDisconnected: IBooleanCallback = undefined;\n\tpublic onError: IErrorCallback = undefined;\n\n\t/**\n\t * \n\t */\n\tconstructor(options: IConnectionOptions);\n\tconstructor(host?: string, port?: number);\n\tconstructor(hostOrOptions: (IConnectionOptions|string), port?: number) {\n\n\t\t// if object\n\t\tif (hostOrOptions && typeof hostOrOptions === \"object\") {\n\t\t\tif (hostOrOptions.hasOwnProperty(\"host\")) {\n\t\t\t\tlet dnsValidation: Array<string> = /((?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?)(?:\\:([0-9]{4}))?/.exec(hostOrOptions[\"host\"]);\n\t\t\t\tif (dnsValidation) {\n\t\t\t\t\tdelete hostOrOptions[\"host\"];\n\t\t\t\t\t// host\n\t\t\t\t\tif (!!dnsValidation[1]) {\n\t\t\t\t\t\tthis.host = dnsValidation[1];\n\t\t\t\t\t}\n\t\t\t\t\t// port\n\t\t\t\t\tif (!!dnsValidation[2]) {\n\t\t\t\t\t\tthis.port = parseInt(dnsValidation[2], 10);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// @todo: object assign\n\t\t\tfor (let key in hostOrOptions) {\n\t\t\t\tif (!hostOrOptions.hasOwnProperty(key)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (this.hasOwnProperty(key)) {\n\t\t\t\t\tthis[key] = hostOrOptions[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// else\n\t\tif (typeof hostOrOptions === \"string\") {\n\t\t\tlet dnsValidation: Array<string> = /((?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?)(?:\\:([0-9]{4}))?/.exec(hostOrOptions.toString());\n\t\t\tif (dnsValidation) {\n\t\t\t\t// host\n\t\t\t\tif (!!dnsValidation[1]) {\n\t\t\t\t\tthis.host = dnsValidation[1];\n\t\t\t\t}\n\t\t\t\t// port\n\t\t\t\tif (!!dnsValidation[2]) {\n\t\t\t\t\tthis.port = parseInt(dnsValidation[2], 10);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (port) {\n\t\t\t\tthis.port = port;\n\t\t\t}\n\t\t}\n\t}\n}"],"sourceRoot":"/source/"}